<html>
<head>
    <title>Geo Coordinates Computation</title>
    <style type="text/css">
        dl dt { font-family: courier; }
        .done { color: green; }
        .notdone { color: orange; }
    </style>
</head>
<body>
<h1>Introduction</h1>

<p>
One key element of Twetailer/Lusanga concept is the locality: actors contact the hub to get information about products and services in their area.
For sure, the coordinates of the area can be dynamically specified, as the range to consider around the area center.
</p>

<p>
Here is a scenario Twetailer will be able to serve:
</p>
<ul>
    <li>A politician working Montreal downtown needs to call a cab to go to the airport.</li>
    <li>He contacts Twetailer with the following request: #taxi YUL airport loc: H3C 2N6 CA.</li>
    <li>Almost immediately, two drivers from nearby stations reply and their proposals are forwarded to the politician.</li>
    <li>The man picks one, confirms the proposal, and goes into the street to take the cab.</li>
    <li>Knowing his meeting is Ottawa downtown, he wants to bring back one of the famous "Obama's maple leaf cookie".</li>
    <li>Because he does not remember the exact store, he queries Twetailer with: "Obama cookie market loc:Ottawa CA".</li>
    <li>Twetailer forwards the response from the baker Claude Bonnet: "Obama Maple Leaf Cookie Byward Market price:$8.50 store:32443".</li>
    <li>Once out of his meeting, the visitor will just have to send "!list store:32443: to get the exact store coordinates ;)</li>
</ul>

<h1>Location resolution from a postal code</h1>

<h1>Location resolution from a city name</h1>

<h1>Computation of the area around a location</h1>

<p>
The following picture illustrates the globe with the latitude (horizontal lines, like the <span style="color:red;">red one</span>)
and the longitude (vertical lines, like the <span style="color:green;">green one</span>).
</p>

<center>
<img src="diagrams/globe-2.png" /><br/>
Illustration of the latitude and longitude on the globe
</center>

<p>
By <a href="http://en.wikipedia.org/wiki/Geographic_coordinate_system">convention</a>:
</p>

<ul>
<li>
The latitude is the angle from a point on the Earth's surface to the equatorial plane. At the Equator (<span style="color:red;">red line</span>), the latitude is 0&deg;.
On the North pole, the latitude is 90&deg; and on the South pole it is -90&deg;.</li>
<li>
The longitude is the angle east or west of a reference meridian (vertical line). The Prime meridian <span style="color:green;">green line</span>)
passing in the back of the Royal Observatory, Greenwich (near London in UK) is the zero-longitude reference.</li>
</ul>

<p>
For its computing algorithm, Twetailer uses the following approximation:
</p>
<ul>
<li><img src="diagrams/longitude.png" align="right"/>59 km on a longitude line means a variation of 0.53&deg; of latitude.</li>
<li>l = 40,075 km / 4 = 10,018.75 km</li>
<li>sin(&#966;) = l / d = 59 / 10.018,75</li>
<li>&#966; = arcsin(59 / 10.018.75) = 0.53&deg;</li>
</ul>
<br clear="both" />
<ul>
<li><img src="diagrams/latitude.png" align="right"/>59 km on the Equator line means a variation of 0.53&deg; of longitude.</li>
<li>Greater is the latitude, more degrees on the longitude are covered by this 59 km distance.</li>
<li>360&deg; is the maximum longitude range covered.</li>
<li>Near the North pole, these 360&deg; can be covered with a little distance.</li>
<li>The covered distance is relative to the latitude : &#955; = arcsin(59 / 10.018.75) * cos(&#966;)</li>
<ul>
<li>&#955;<sub>1</sub> = 0.53&deg; * cos(0&deg;) = 0.53&deg;</li>
<li>&#955;<sub>2</sub> = 0.53&deg; * cos(45&deg;) = 0.75&deg;</li>
<li>&#955;<sub>3</sub> = 0.53&deg; * cos(60&deg;) = 1.06&deg;</li>
</ul>
</ul>

</body>
</html>
